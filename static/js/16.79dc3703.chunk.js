(this["webpackJsonpmy-homepage"]=this["webpackJsonpmy-homepage"]||[]).push([[16],{311:function(t,e,n){},330:function(t,e,n){"use strict";n.r(e);var a=n(47),i=n(160),c=(n(311),n(0)),s=n.n(c),r=n(336),l=n(331),o=n(126),j=n(339),m=n(333),u=n(315),b=n(135),d=n(154),h=n(100),O=n(337),x=n(320),p=n(312),f=n.n(p),g=n(40),v=n(3),y=r.a.TextArea,S=function(t){var e=new Date(t);return(new Date).getTime()-e.getTime()>864e5?f()(t).startOf("day").fromNow():f()(t).startOf("minutes").fromNow()},w=function(t){var e=t.children,n=t.email,a=t.text,i=t.time,c=t.isChild,s=void 0===c||c,r=t.ids,m=void 0===r?void 0:r,u=t.onSend;return Object(v.jsx)(l.a,{style:{background:"white"},actions:[s?null:Object(v.jsx)(o.a,{onClick:function(){return u(m)},type:"link",children:"\u56de\u590d"})],author:Object(v.jsx)("a",{children:n}),avatar:Object(v.jsx)(j.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),datetime:S(i),content:Object(v.jsx)("p",{children:a}),children:e})},C=function(t){var e=t.onChange,n=t.onSubmit,a=t.submitting,i=t.value;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a.Item,{children:Object(v.jsx)(y,{maxLength:50,rows:4,onChange:e,value:i})}),Object(v.jsx)(m.a.Item,{style:{textAlign:"right"},children:Object(v.jsx)(o.a,{htmlType:"submit",loading:a,onClick:n,type:"primary",children:"\u53d1\u9001"})})]})};function Y(t){var e=t.app,n=Object(c.useState)(!0),s=Object(i.a)(n,2),r=s[0],m=s[1],p=Object(c.useState)(!1),g=Object(i.a)(p,2),y=g[0],S=g[1],Y=Object(c.useState)(!1),k=Object(i.a)(Y,2),N=k[0],D=k[1],H=Object(c.useState)(""),L=Object(i.a)(H,2),T=L[0],A=L[1],M=Object(c.useState)(void 0),z=Object(i.a)(M,2),F=z[0],J=z[1],X=Object(c.useState)([]),q=Object(i.a)(X,2),I=q[0],V=q[1];Object(c.useEffect)((function(){r&&e.callFunction({name:"comments",data:{type:"get"}}).then((function(t){V(JSON.parse(JSON.stringify(t.result.data.map((function(t){return Object(a.a)(Object(a.a)({},t),{},{child:t.child.reverse()})})).reverse()))),m(!1)}))}),[r]);var _=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;J(t),e.auth().hasLoginState()?D(!0):u.b.warning("\u8bf7\u767b\u5f55\u540e\u4f7f\u7528")};return Object(v.jsxs)("div",{className:"Message",children:[Object(v.jsxs)("div",{className:"title",children:[Object(v.jsx)(o.a,{size:"large",type:"link",children:"\u7559\u8a00"}),Object(v.jsx)("div",{className:"right",children:Object(v.jsx)(b.a,{title:"\u8bd5\u8bd5\u770b\u7559\u8a00\u529f\u80fd\u5427",children:Object(v.jsxs)(o.a,{size:"large",type:"link",onClick:function(){return _()},children:["\u70b9\u6b64\u7559\u8a00",Object(v.jsx)(x.a,{})]})})})]}),Object(v.jsx)(d.a,{className:"fgx"}),Object(v.jsx)(h.a,{spinning:r,children:Object(v.jsx)("div",{className:"Contents",children:I.map((function(t){return Object(v.jsx)(w,{onSend:_,email:t.email,ids:t._id,text:t.text,time:t.time,isChild:!1,children:t.child.map((function(t){return Object(v.jsx)(w,{email:t.email,text:t.text,time:t.time},t.time)}))},t._id)}))})}),Object(v.jsx)(O.a,{width:"80vw",visible:N,title:F?"\u56de\u590d\u8bc4\u8bba":"\u53d1\u9001\u8bc4\u8bba",onCancel:function(){D(!1),A("")},footer:null,children:Object(v.jsx)(l.a,{avatar:Object(v.jsx)(j.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),content:Object(v.jsx)(C,{onChange:function(t){return A(t.target.value)},onSubmit:function(){T?(S(!0),F?e.callFunction({name:"comments",data:{type:"add",email:e.auth().hasLoginState().user.email,text:T,id:F,time:f()().format("YYYY-MM-DD HH:mm:ss")}}).then((function(){S(!1),D(!1),A(""),m(!0)})):e.callFunction({name:"comments",data:{type:"add",email:e.auth().hasLoginState().user.email,text:T,time:f()().format("YYYY-MM-DD HH:mm:ss")}}).then((function(){S(!1),D(!1),A(""),m(!0)}))):u.b.warning("\u8bf7\u8f93\u5165\u5185\u5bb9\uff01")},submitting:y,value:T})})})]})}e.default=Object(g.b)((function(t){return{app:t.App}}),null)(s.a.memo(Y))}}]);
//# sourceMappingURL=16.79dc3703.chunk.js.map